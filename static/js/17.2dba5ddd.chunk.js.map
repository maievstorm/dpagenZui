{"version":3,"sources":["views/dataingest/Logdetail.jsx","services/DataIngest.js","../node_modules/@mui/icons-material/ArrowBack.js","../node_modules/@mui/icons-material/Refresh.js"],"names":["Logdetail","navigate","useNavigate","location","useLocation","DagIdnDagrunId","state","id","useState","rows","setData","getData","DataIngest","then","res","data","task_instances","map","item","start_date","Date","parse","toLocaleString","end_date","task_id","duration","useEffect","refresh","options","filter","print","selectableRows","responsive","textLabels","customToolbar","onClick","selected","split","title","columns","name","label","getLoginfo","DagId","a","router","config","airflowapi","BaseAxios","method","url","auth","username","password","response","console","log","GetProcess","item_type","headers","params","user_name","UserService","getUsername","_interopRequireDefault","require","Object","defineProperty","exports","value","default","_createSvgIcon","_jsxRuntime","_default","jsx","d"],"mappings":"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","file":"static/js/17.2dba5ddd.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router\"\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport Button from '@mui/material/Button';\r\nimport Box from '@mui/material/Box';\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport DataIngest from \"services/DataIngest\";\r\nimport RefreshIcon from '@mui/icons-material/Refresh';\r\nimport { Tooltip, IconButton } from '@mui/material';\r\n\r\n\r\nexport default function Logdetail() {\r\n    const navigate = useNavigate()\r\n    const location = useLocation()\r\n    const DagIdnDagrunId = location?.state?.id;\r\n    const [rows, setData] = useState([]);\r\n\r\n    const getData = () => {\r\n        DataIngest.Logdetail(DagIdnDagrunId)\r\n            .then(res => {\r\n                \r\n                setData(res.data.task_instances.map(item => {\r\n                    let start_date = new Date(Date.parse(item.start_date)).toLocaleString()\r\n                    let end_date = new Date(Date.parse(item.end_date)).toLocaleString()\r\n\r\n                    return {\r\n                        'task_id': item.task_id,\r\n                        'start_date': start_date,\r\n                        'end_date': end_date,\r\n                        'state': item.state,\r\n                        'duration' : item.duration,\r\n                    }\r\n                }))\r\n            })\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        getData()\r\n        \r\n\r\n    }, [])\r\n    const refresh = ()=>{\r\n        getData()\r\n    }\r\n\r\n    const columns = [\r\n        {\r\n            name: \"task_id\",\r\n            options: {\r\n                filter: true\r\n            },\r\n            label: 'Bước'\r\n        },\r\n        {\r\n            name: \"start_date\",\r\n            options: {\r\n                filter: true\r\n            },\r\n            label: 'Bắt đầu',\r\n        },\r\n      \r\n        {\r\n            name: \"end_date\",\r\n            options: {\r\n                filter: true\r\n            },\r\n            label: 'Kết thúc'\r\n        }\r\n        ,\r\n        {\r\n            name: \"duration\",\r\n            options: {\r\n                filter: true\r\n            },\r\n            label: 'Thời gian'\r\n        }\r\n        ,\r\n        {\r\n            name: \"state\",\r\n            options: {\r\n                filter: true\r\n            },\r\n            label: 'Trạng thái'\r\n        }\r\n\r\n    ];\r\n \r\n    const options = {\r\n        filter: false,\r\n        print: false,\r\n        selectableRows: \"single\",\r\n        responsive: \"standard\",\r\n        textLabels: {},\r\n        customToolbar: () =>{\r\n            return (\r\n                <IconButton onClick={refresh}>{<RefreshIcon />}</IconButton>\r\n            )\r\n        },\r\n        selectableRows: 'none' \r\n       \r\n       \r\n    }; \r\n\r\n    const BacktoDag = (selected) => {\r\n        navigate('/dataingest/loginformation',{state:{id:selected}})\r\n\r\n    } \r\n\r\n    return (\r\n        <Box>\r\n            <Box>\r\n                <Button onClick={() => BacktoDag(DagIdnDagrunId.split(\"/\")[0])} >{<ArrowBackIcon />}</Button>\r\n                <p>Tên tiến trình: <strong>{DagIdnDagrunId}</strong></p>\r\n            </Box>\r\n\r\n            <MUIDataTable\r\n                title={\"Lịch sử tiến trình\"}\r\n                data={rows}\r\n                columns={columns}\r\n                options={options}\r\n\r\n            />\r\n        </Box>\r\n    )\r\n}","import BaseAxios from \"./BaseAxios\";\r\nimport config from \"config\";\r\nimport UserService from \"./UserService\";\r\n\r\nconst getLoginfo = async (DagId) => {\r\n    let router = config.airflowapi + '/dags/' + DagId + '/dagRuns?limit=40&order_by=-start_date'\r\n    let response\r\n    try {\r\n        response = await BaseAxios({\r\n            method: 'get',\r\n            url: router,\r\n            auth: {\r\n                username: 'hung',\r\n                password: '123456a@'\r\n            }\r\n        });\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n    return response\r\n}\r\n\r\n//https://flowdpa.apps.xplat.fis.com.vn/api/v1/dags/chinh_transfer_card_transaction/dagRuns/manual__2022-07-04T10%3A46%3A43.318462%2B00%3A00/taskInstances?limit=100\r\n\r\nconst Logdetail = async (DagIdnDagrunId) => {\r\n    let router = config.airflowapi + '/dags/' + DagIdnDagrunId +'/taskInstances?limit=100';\r\n    let response\r\n    try {\r\n        response = await BaseAxios({\r\n            method: 'get',\r\n            url: router,\r\n            auth: {\r\n                username: 'hung',\r\n                password: '123456a@'\r\n            }\r\n        });\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n    return response\r\n}\r\n\r\nexport const GetProcess = async (item_type)=>{\r\n    let response\r\n    const router =  '/invoice/usernamentype';\r\n    let JWTToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJDTE9PbHdEZ0pPTGpVOHVzMnoySTNyT2pzRkEzNnF6TiJ9.2hsA0NJzwy2YJOeST2JnYJoRIohiJh9SHaKvp9GhgjM';\r\n    try {\r\n        response = await BaseAxios({\r\n            method: 'get',\r\n            url: router,\r\n            headers: {\"authorization\" : `Bearer ${JWTToken}`},\r\n            params: {\r\n                user_name: UserService.getUsername(),\r\n                item_type: item_type\r\n            }\r\n        });\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n    return response\r\n}\r\n\r\nconst DataIngest = {\r\n    getLoginfo,\r\n    Logdetail\r\n\r\n};\r\n\r\nexport default DataIngest;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"\n}), 'ArrowBack');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n}), 'Refresh');\n\nexports.default = _default;"],"sourceRoot":""}