{"version":3,"sources":["services/DataIngest.js","../node_modules/@mui/icons-material/ArrowBack.js","../node_modules/@mui/icons-material/RateReview.js","../node_modules/@mui/icons-material/Refresh.js","views/dataingest/LogInfo.jsx"],"names":["getLoginfo","DagId","a","router","config","airflowapi","BaseAxios","method","url","auth","username","password","response","console","log","Logdetail","DagIdnDagrunId","GetProcess","item_type","headers","params","user_name","UserService","getUsername","DataIngest","_interopRequireDefault","require","Object","defineProperty","exports","value","default","_createSvgIcon","_jsxRuntime","_default","jsx","d","LogInfo","navigate","useNavigate","location","useLocation","state","id","useState","rows","setData","getData","then","res","data","dag_runs","map","item","start_date","Date","parse","toLocaleString","end_date","dag_run_id","useEffect","refresh","options","filter","print","selectableRows","responsive","textLabels","customToolbar","onClick","customToolbarSelect","selectedRows","title","type","selected","dataIndex","columns","name","label"],"mappings":"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","file":"static/js/16.8058453d.chunk.js","sourcesContent":["import BaseAxios from \"./BaseAxios\";\r\nimport config from \"config\";\r\nimport UserService from \"./UserService\";\r\n\r\nconst getLoginfo = async (DagId) => {\r\n    let router = config.airflowapi + '/dags/' + DagId + '/dagRuns?limit=40&order_by=-start_date'\r\n    let response\r\n    try {\r\n        response = await BaseAxios({\r\n            method: 'get',\r\n            url: router,\r\n            auth: {\r\n                username: 'hung',\r\n                password: '123456a@'\r\n            }\r\n        });\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n    return response\r\n}\r\n\r\n//https://flowdpa.apps.xplat.fis.com.vn/api/v1/dags/chinh_transfer_card_transaction/dagRuns/manual__2022-07-04T10%3A46%3A43.318462%2B00%3A00/taskInstances?limit=100\r\n\r\nconst Logdetail = async (DagIdnDagrunId) => {\r\n    let router = config.airflowapi + '/dags/' + DagIdnDagrunId +'/taskInstances?limit=100';\r\n    let response\r\n    try {\r\n        response = await BaseAxios({\r\n            method: 'get',\r\n            url: router,\r\n            auth: {\r\n                username: 'hung',\r\n                password: '123456a@'\r\n            }\r\n        });\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n    return response\r\n}\r\n\r\nexport const GetProcess = async (item_type)=>{\r\n    let response\r\n    const router =  '/invoice/usernamentype';\r\n    let JWTToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJDTE9PbHdEZ0pPTGpVOHVzMnoySTNyT2pzRkEzNnF6TiJ9.2hsA0NJzwy2YJOeST2JnYJoRIohiJh9SHaKvp9GhgjM';\r\n    try {\r\n        response = await BaseAxios({\r\n            method: 'get',\r\n            url: router,\r\n            headers: {\"authorization\" : `Bearer ${JWTToken}`},\r\n            params: {\r\n                user_name: UserService.getUsername(),\r\n                item_type: item_type\r\n            }\r\n        });\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n    return response\r\n}\r\n\r\nconst DataIngest = {\r\n    getLoginfo,\r\n    Logdetail\r\n\r\n};\r\n\r\nexport default DataIngest;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"\n}), 'ArrowBack');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 14v-2.47l6.88-6.88c.2-.2.51-.2.71 0l1.77 1.77c.2.2.2.51 0 .71L8.47 14H6zm12 0h-7.5l2-2H18v2z\"\n}), 'RateReview');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n}), 'Refresh');\n\nexports.default = _default;","import { useEffect, useState } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router\"\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport Button from '@mui/material/Button';\r\nimport Box from '@mui/material/Box';\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport DataIngest from \"services/DataIngest\";\r\nimport { Tooltip, IconButton } from '@mui/material';\r\nimport RefreshIcon from '@mui/icons-material/Refresh';\r\n\r\nimport RateReviewIcon from '@mui/icons-material/RateReview';\r\nexport default function LogInfo() {\r\n    const navigate = useNavigate()\r\n    const location = useLocation()\r\n    const DagId = location?.state?.id\r\n    const [rows, setData] = useState([]);\r\n\r\n\r\n    const getData = () => {\r\n        DataIngest.getLoginfo(DagId)\r\n            .then(res => {\r\n                setData(res.data.dag_runs.map(item => {\r\n                    let start_date = new Date(Date.parse(item.start_date)).toLocaleString()\r\n                    // let execution_date = new Date( Date.parse(item.execution_date) ).toLocaleString()\r\n                    let end_date = new Date(Date.parse(item.end_date)).toLocaleString()\r\n\r\n                    return {\r\n                        'dag_run_id': item.dag_run_id,\r\n                        'start_date': start_date,\r\n                        // 'execution_date': execution_date,\r\n                        'end_date': end_date,\r\n                        'state': item.state\r\n                    }\r\n                }))\r\n            })\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        getData()\r\n    }, [])\r\n\r\n    const columns = [\r\n        {\r\n            name: \"dag_run_id\",\r\n            options: {\r\n                filter: true\r\n            },\r\n            label: 'Lịch sử'\r\n        },\r\n        {\r\n            name: \"start_date\",\r\n            options: {\r\n                filter: true\r\n            },\r\n            label: 'Bắt đầu',\r\n        },\r\n        // {\r\n        //     name: \"execution_date\",\r\n        //     options: {\r\n        //         filter: true\r\n        //     },\r\n        //     label: 'execution_date'\r\n        // },\r\n        {\r\n            name: \"end_date\",\r\n            options: {\r\n                filter: true\r\n            },\r\n            label: 'Kết thúc'\r\n        }\r\n        ,\r\n        {\r\n            name: \"state\",\r\n            options: {\r\n                filter: true\r\n            },\r\n            label: 'Trạng thái'\r\n        }\r\n\r\n    ];\r\n\r\n    const onEdittJobClickHandler = (type, selected) => {\r\n        navigate(type, { state: { id: selected } })\r\n    }\r\n\r\n    const refresh = () => {\r\n        getData()\r\n    }\r\n\r\n\r\n    const options = {\r\n        filter: false,\r\n        print: false,\r\n        selectableRows: \"single\",\r\n        responsive: \"standard\",\r\n        textLabels: {},\r\n        customToolbar: () => {\r\n            return (\r\n                <IconButton onClick={refresh}>{<RefreshIcon />}</IconButton>\r\n            )\r\n        },\r\n        customToolbarSelect: selectedRows => (\r\n            <>\r\n                <Tooltip title=\"Xem chi tiết log\">\r\n                    <IconButton\r\n                        onClick={() => {\r\n                            onEdittJobClickHandler('logdagdetail', DagId + '/dagRuns/' + rows[selectedRows.data[0].dataIndex]['dag_run_id']);\r\n\r\n                        }}\r\n\r\n                    >\r\n                        <RateReviewIcon />\r\n                    </IconButton>\r\n\r\n                </Tooltip>\r\n\r\n            </>\r\n\r\n        )\r\n\r\n\r\n    };\r\n\r\n    return (\r\n        <Box>\r\n            <Box>\r\n                <Button onClick={() => navigate('/dataingest')} >{<ArrowBackIcon />}</Button>\r\n                <p>Tên tiến trình: <strong>{DagId}</strong></p>\r\n            </Box>\r\n\r\n            <MUIDataTable\r\n                title={\"Lịch sử tiến trình\"}\r\n                data={rows}\r\n                columns={columns}\r\n                options={options}\r\n\r\n            />\r\n        </Box>\r\n    )\r\n}"],"sourceRoot":""}