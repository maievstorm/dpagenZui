{"version":3,"sources":["../node_modules/@mui/icons-material/PlayCircleOutline.js","views/dataingest/ManageFlow.jsx","views/dataingest/index.js","services/DataIngest.js","../node_modules/@mui/icons-material/Add.js","../node_modules/@mui/icons-material/RateReview.js","../node_modules/@mui/icons-material/ModeEdit.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_createSvgIcon","_jsxRuntime","_default","jsx","d","ManageFlow","useState","rows","setData","useEffect","GetProcess","then","res","data","map","item","invoice_created_ts","Date","parse","toLocaleString","id_invoice","item_name","catch","err","console","log","onEdittJobClickHandler","type","selected","navigate","state","id","options","filter","print","selectableRows","responsive","textLabels","customToolbarSelect","selectedRows","Tooltip","title","IconButton","onClick","apidagurl","config","airflowapi","axios","method","url","auth","username","password","onStartJobClickHandler","dataIndex","useNavigate","Button","columns","name","label","Dataingestpage","getLoginfo","DagId","a","router","BaseAxios","response","Logdetail","DagIdnDagrunId","item_type","headers","params","user_name","UserService","getUsername","DataIngest"],"mappings":"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","file":"static/js/15.db568237.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m10 16.5 6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n}), 'PlayCircleOutline');\n\nexports.default = _default;","import { useState, useEffect } from 'react'\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport axios from 'axios';\r\nimport config from \"../../config\";\r\nimport ModeEditIcon from '@mui/icons-material/ModeEdit';\r\nimport PlayCircleOutlineIcon from '@mui/icons-material/PlayCircleOutline';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Button from '@mui/material/Button';\r\nimport UserService from 'services/UserService';\r\nimport { Tooltip, IconButton } from '@mui/material';\r\n\r\nimport RateReviewIcon from '@mui/icons-material/RateReview';\r\nimport { GetProcess } from 'services/DataIngest';\r\n\r\nexport default function ManageFlow() {\r\n    \r\n    const [rows, setData] = useState([]);\r\n    const columns = [\r\n        {\r\n            name: \"id_invoice\",\r\n            options: {\r\n                filter: true\r\n            },\r\n            label: 'ID'\r\n        },\r\n        {\r\n            name: \"item_name\",\r\n            options: {\r\n                filter: true\r\n            },\r\n            label: 'Tên tiến trình',\r\n        },\r\n        {\r\n            name: \"invoice_created_ts\",\r\n            options: {\r\n                filter: false\r\n            },\r\n            label: 'Ngày tạo'\r\n        }\r\n\r\n    ];\r\n   \r\n    useEffect(() => {\r\n        GetProcess('airflow')\r\n        .then(res => {\r\n            setData(res.data.data.map(item=>{\r\n                let invoice_created_ts = new Date(Date.parse(item.invoice_created_ts)).toLocaleString()\r\n                return {\r\n                    'id_invoice':item.id_invoice,\r\n                    'item_name':item.item_name,\r\n                    'invoice_created_ts':invoice_created_ts\r\n                }\r\n            }));\r\n        }).catch(err => { console.log(err) })\r\n    }, []);\r\n\r\n\r\n    // const getairflowapi = config.rootapi + '/invoice/usernamentype/' + UserService.getUsername() + '&airflow';\r\n    //    useEffect(() => {\r\n    //     axios({ method: 'get', url: getairflowapi  }\r\n    //     ).then(res => {\r\n    //         setData(res.data.data.map(item=>{\r\n    //             let invoice_created_ts = new Date(Date.parse(item.invoice_created_ts)).toLocaleString()\r\n    //             return {\r\n    //                 'id_invoice':item.id_invoice,\r\n    //                 'item_name':item.item_name,\r\n    //                 'invoice_created_ts':invoice_created_ts\r\n    //             }\r\n\r\n    //         }));\r\n    //         // setData(res.data.data);\r\n    //     }).catch(err => { console.log(err) })\r\n    // }, []);\r\n\r\n\r\n    \r\n    const onStartJobClickHandler = (selected) => {\r\n        console.log(selected);\r\n        const apidagurl = config.airflowapi + '/dags/' + selected + '/dagRuns'\r\n\r\n        const body = {\r\n            \"conf\": {},\r\n        }\r\n        axios({\r\n            method: 'post',\r\n            url: apidagurl,\r\n\r\n            auth: {\r\n                username: 'hung',\r\n                password: '123456a@'\r\n            },\r\n            data: body\r\n        });\r\n    }\r\n\r\n    const onEdittJobClickHandler = (type,selected) => {\r\n        navigate(type,{state:{id:selected}})\r\n\r\n    }\r\n\r\n    const options = {\r\n        filter: false,\r\n        print: false,\r\n        selectableRows: \"single\",\r\n        responsive: \"standard\",\r\n        textLabels: {},\r\n        customToolbarSelect: selectedRows => (\r\n            <>\r\n                <Tooltip title=\"Kích hoạt tiến trình\">\r\n                    <IconButton\r\n                        onClick={() => {\r\n\r\n                            onStartJobClickHandler(rows[selectedRows.data[0].dataIndex]['item_name']);\r\n\r\n                        }}\r\n\r\n                    >\r\n                        <PlayCircleOutlineIcon />\r\n                    </IconButton>\r\n\r\n                </Tooltip>\r\n                <Tooltip title=\"Xem log\">\r\n                    <IconButton\r\n                        onClick={() => {\r\n\r\n                            onEdittJobClickHandler('loginformation',rows[selectedRows.data[0].dataIndex]['item_name']);\r\n\r\n                        }}\r\n\r\n                    >\r\n                        <RateReviewIcon />\r\n                    </IconButton>\r\n\r\n                </Tooltip>\r\n                <Tooltip title=\"Hiệu chỉnh tiến trình\">\r\n                    <IconButton\r\n                        onClick={() => {\r\n\r\n                            onEdittJobClickHandler('editflowjob',rows[selectedRows.data[0].dataIndex]['item_name']);\r\n\r\n                        }}\r\n\r\n                    >\r\n                        <ModeEditIcon />\r\n                    </IconButton>\r\n\r\n                </Tooltip>\r\n            </>\r\n\r\n        )\r\n    };\r\n\r\n\r\n\r\n    const navigate = useNavigate()\r\n\r\n    const onClickHandler = () => navigate('/dataingest/createflowjob')\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Button onClick={onClickHandler} > {<AddIcon />} Tiến trình mới</Button>\r\n            {/* <Button   > {<ModeEditIcon/>} Tải xuống</Button>\r\n                <Button   > {<ModeEditIcon/>} Xoá</Button> */}\r\n            <MUIDataTable\r\n                title={\"Danh sách tiến trình\"}\r\n                data={rows}\r\n                columns={columns}\r\n                options={options}\r\n            />\r\n\r\n        </div>\r\n\r\n    )\r\n\r\n}\r\n\r\n\r\n\r\n","import ManageFlow from './ManageFlow';\r\n \r\n \r\n\r\n// project imports\r\n//import MainCard from 'ui-component/cards/MainCard';\r\n\r\n// ==============================|| Bigdata Page ||============================== //\r\n\r\nconst Dataingestpage = () => (\r\n    \r\n        <ManageFlow/>\r\n     \r\n           \r\n);\r\n\r\nexport default Dataingestpage;\r\n","import BaseAxios from \"./BaseAxios\";\r\nimport config from \"config\";\r\nimport UserService from \"./UserService\";\r\n\r\nconst getLoginfo = async (DagId) => {\r\n    let router = config.airflowapi + '/dags/' + DagId + '/dagRuns?limit=40&order_by=-start_date'\r\n    let response\r\n    try {\r\n        response = await BaseAxios({\r\n            method: 'get',\r\n            url: router,\r\n            auth: {\r\n                username: 'hung',\r\n                password: '123456a@'\r\n            }\r\n        });\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n    return response\r\n}\r\n\r\n//https://flowdpa.apps.xplat.fis.com.vn/api/v1/dags/chinh_transfer_card_transaction/dagRuns/manual__2022-07-04T10%3A46%3A43.318462%2B00%3A00/taskInstances?limit=100\r\n\r\nconst Logdetail = async (DagIdnDagrunId) => {\r\n    let router = config.airflowapi + '/dags/' + DagIdnDagrunId +'/taskInstances?limit=100';\r\n    let response\r\n    try {\r\n        response = await BaseAxios({\r\n            method: 'get',\r\n            url: router,\r\n            auth: {\r\n                username: 'hung',\r\n                password: '123456a@'\r\n            }\r\n        });\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n    return response\r\n}\r\n\r\nexport const GetProcess = async (item_type)=>{\r\n    let response\r\n    const router =  '/invoice/usernamentype';\r\n    let JWTToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJDTE9PbHdEZ0pPTGpVOHVzMnoySTNyT2pzRkEzNnF6TiJ9.2hsA0NJzwy2YJOeST2JnYJoRIohiJh9SHaKvp9GhgjM';\r\n    try {\r\n        response = await BaseAxios({\r\n            method: 'get',\r\n            url: router,\r\n            headers: {\"authorization\" : `Bearer ${JWTToken}`},\r\n            params: {\r\n                user_name: UserService.getUsername(),\r\n                item_type: item_type\r\n            }\r\n        });\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n    return response\r\n}\r\n\r\nconst DataIngest = {\r\n    getLoginfo,\r\n    Logdetail\r\n\r\n};\r\n\r\nexport default DataIngest;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 14v-2.47l6.88-6.88c.2-.2.51-.2.71 0l1.77 1.77c.2.2.2.51 0 .71L8.47 14H6zm12 0h-7.5l2-2H18v2z\"\n}), 'RateReview');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'ModeEdit');\n\nexports.default = _default;"],"sourceRoot":""}